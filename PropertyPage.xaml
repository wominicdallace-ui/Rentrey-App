<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:local="clr-namespace:Rentrey.Maui"
             x:Class="Rentrey.Maui.PropertyPage"
             BackgroundColor="#F5F5F5"
             Title="Property">

    <ContentPage.Resources>
        <local:RatioConverter x:Key="RatioConverter" />
    </ContentPage.Resources>

    <ScrollView>
        <VerticalStackLayout Spacing="15" Padding="15">

            <Grid ColumnDefinitions="60, *, 
 Auto" Margin="0,15,0,15">
                <Frame Grid.Column="0"
                       CornerRadius="30"
                       HeightRequest="60"
                       WidthRequest="60"
             
                       BorderColor="#FFD700"
                       BackgroundColor="#FFF8DC"
                       HorizontalOptions="Start"
                       VerticalOptions="Center"
                     
                       IsClippedToBounds="True"
                       Padding="0">
                    <Image Source="{Binding ProfileImageSource}" Aspect="AspectFill" />
                </Frame>

                <VerticalStackLayout Grid.Column="1" VerticalOptions="Center" Spacing="4" Margin="15,0,0,0">

                    <Label Text="{Binding UserName}" FontSize="20" FontAttributes="Bold" TextColor="#333333"/>
                    <Label Text="{Binding Points}" FontSize="16" FontAttributes="Bold" TextColor="{Binding RankColor}"/>
                    <BoxView HeightRequest="8" BackgroundColor="#E0E0E0" CornerRadius="4" HorizontalOptions="FillAndExpand">
                        <BoxView.Background>

                            <LinearGradientBrush StartPoint="0,0" EndPoint="{Binding ProgressRatio, Converter={StaticResource RatioConverter}, FallbackValue='0,0'}">
                                <GradientStop Color="{Binding RankColor}" Offset="{Binding ProgressRatio}" />
                                <GradientStop Color="#D3D3D3" Offset="{Binding ProgressRatio}" />

                            </LinearGradientBrush>
                        </BoxView.Background>
                    </BoxView>
                    <Label Text="{Binding LastUpdated}" FontSize="12" TextColor="#888888"/>
                </VerticalStackLayout>

            </Grid>

            <Frame CornerRadius="12" Padding="0" Margin="0,5,0,0" HasShadow="True">
                <Image Source="{Binding Property.ImageSource}" Aspect="AspectFill" HeightRequest="250" />
            </Frame>

            <Grid ColumnDefinitions="*, *" ColumnSpacing="15" Padding="0,5">
                <Frame Grid.Column="0" CornerRadius="10" BackgroundColor="White" Padding="10" HasShadow="True">
                    <Label Text="{Binding Property.Details}"
                           FontSize="16"
                          
                           FontAttributes="Bold"
                           TextColor="#333333"
                           HorizontalOptions="Center" />
                </Frame>

                <Frame Grid.Column="1" CornerRadius="10" BackgroundColor="White" Padding="10" HasShadow="True">

                    <Label Text="{Binding Property.Address}"
                           FontSize="16"
                           FontAttributes="Bold"
                           TextColor="#333333"
    
                           HorizontalOptions="Center" />
                </Frame>
            </Grid>

            <Label Text="{Binding Property.Price, StringFormat='Price: ${0} p/w'}"
                 
                   FontSize="20"
                   FontAttributes="Bold"
                   TextColor="#FFA726"
                   HorizontalOptions="Center"
                   Margin="0, 10, 0, 5"/>

            <Frame CornerRadius="10"
                   BackgroundColor="{Binding ApplicationColor}"
                   Padding="15"
                   Margin="0,5,0,10"
                   HasShadow="False">

                <Label Text="{Binding ApplicationStatusText}"
                       FontSize="14"
                       FontAttributes="Bold"
                       TextColor="White"
                       HorizontalOptions="Center" />

            </Frame>

            <Label Text="Submit Tenancy Application"
                   FontSize="18"
                   FontAttributes="Bold"
                   TextColor="#333333"
    
                   HorizontalOptions="Center" />

            <Frame CornerRadius="10"
                   Padding="15"
                   BackgroundColor="White"
                   Margin="0,0,0,10"
              
                   HasShadow="True">
                <HorizontalStackLayout Spacing="15" VerticalOptions="Center">
                    <Image Source="pdf_icon.png" HeightRequest="40" WidthRequest="40" VerticalOptions="Center" />
                    <Label Text="Submit Tenancy Application"
                           FontSize="16"
  
                           TextColor="#333333"
                           VerticalOptions="Center" />
                </HorizontalStackLayout>
            </Frame>

            <Button Text="Submit"
      
                    BackgroundColor="#FFA726"
                    TextColor="White"
                    CornerRadius="10"
                    FontSize="20"
                    FontAttributes="Bold"
      
                    Padding="15"
                    Margin="0, 10"
                    Clicked="OnSubmitClicked"/>
        </VerticalStackLayout>
    </ScrollView>
</ContentPage>